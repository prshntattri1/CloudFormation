{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Application Load Balancer Stack",
    "Parameters": {
      "VpcId": {"Type": "String"},
      "SubnetIds": {"Type": "List<AWS::EC2::Subnet::Id>"}
    },
    "Resources": {
      "5277268871ALBSG" : {
        "Type" : "AWS::EC2::SecurityGroup",
        "Properties" : {
          "GroupDescription" : "5277268871 ALB Sec Group",
          "SecurityGroupIngress" : [
            { "IpProtocol" : "tcp", "FromPort" : "80", "ToPort" : "80", "CidrIp" : "0.0.0.0/0" }
          ],
          "VpcId" : { "Ref": "VpcId" }
        }
      },
      "5277268871ALB": {
        "Type" : "AWS::ElasticLoadBalancingV2::LoadBalancer",
        "Properties" : {
          "SecurityGroups" : [ { "Ref": "5277268871ALBSG" } ],
          "Subnets" : { "Ref": "SubnetIds" }
       }
     },
     "5277268871ALBTG" : {
       "Type" : "AWS::ElasticLoadBalancingV2::TargetGroup",
       "Properties" : {
         "HealthCheckIntervalSeconds" : 60,
         "UnhealthyThresholdCount" : 10,
         "HealthCheckPath" : "/",
         "Name" : "5277268871ALBTG",
         "Port" : 80,
         "Protocol" : "HTTP",
         "VpcId" : { "Ref": "VpcId" }
        }
     },
     "5277268871ALBListener" : {
        "Type" : "AWS::ElasticLoadBalancingV2::Listener",
        "Properties" : {
          "DefaultActions" : [{
            "Type" : "forward",
            "TargetGroupArn" : { "Ref" : "5277268871ALBTG" }
          }],
          "LoadBalancerArn" : { "Ref" : "5277268871ALB" },
          "Port" : "80",
          "Protocol" : "HTTP"
        }
      }
    },
    "Outputs": {
      "5277268871ALBTGARN": {
          "Description": "5277268871ALBTG ARN",
          "Export": {"Name": "5277268871ALBTGARN"},
          "Value": {"Ref": "5277268871ALBTG"}
      }
    }
}
